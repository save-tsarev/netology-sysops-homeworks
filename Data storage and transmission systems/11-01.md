# Домашнее задание к занятию «Базы данных, их типы»

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.
Ответ 1.1: 
Бюджетирование проектов и формирование аналитических отчетов
Подходящая СУБД: реляционная (SQL), например, PostgreSQL или Microsoft SQL Server.
	Причины:
	•	Гарантированная целостность данных благодаря ACID-транзакциям.
	•	Возможности для выполнения сложных запросов и агрегирования данных.
	•	Поддержка аналитических функций (например, прогнозирования).


1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 
Ответ 1.1*: 
Ускорение хеширования:
Для ускорения хеширования можно использовать специализированные библиотеки и API, такие как bcrypt или Argon2, или интегрировать GPU-ускорение с использованием CUDA или OpenCL.

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.
Ответ 1.2: 
-Для лендингов: NoSQL (документоориентированная), например, MongoDB.
	Причины:
	•	Гибкость в структуре данных (разные типы данных в документах).
	•	Высокая скорость записи и чтения.
-Для CRM: реляционная СУБД (например, MySQL или PostgreSQL).
	Причины:
	•	Строгость структуры данных, необходимая для обработки заказов, статусов сделок и других CRM-процессов.
	•	Удобство работы с реляционными связями.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?
Ответ 1.2*: 
Использование одной СУБД:
Можно использовать PostgreSQL с расширением JSONB. Это позволит:
	•	Хранить данные лендингов в формате JSON для гибкости.
	•	Поддерживать строго структурированные данные CRM через реляционные таблицы.

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.
Ответ 1.3: 
База для норм, правил и обучающих материалов
Подходящая СУБД: реляционная, например, SQLite (если объем небольшой) или PostgreSQL.
	•	Причины:
	•	Простота структуры и запросов.
	•	Легкость использования и масштабирования.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.
Ответ 1.4: 
Логистика (формирование маршрутов)
Подходящая СУБД: графовая, например, Neo4j.
	•	Причины:
	•	Эффективная работа с графами для маршрутов и связей.
	•	Быстрый поиск кратчайших путей.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.
Ответ 2.1:
1.	Инициация пополнения:
Пользователь вводит сумму и выбирает способ оплаты (например, карта или электронный кошелек) через приложение или сайт.
	2.	Проверка данных:
Система проверяет корректность введенных данных (номер телефона, реквизиты карты).
	3.	Создание транзакции:
В СУБД создается запись с уникальным идентификатором транзакции, её статусом (например, “в ожидании”) и подробной информацией.
	4.	Авторизация платежа:
Система отправляет запрос в платежный шлюз или банк для резервирования средств на счете пользователя.
	•	Если банк подтверждает блокировку средств, система переходит к следующему шагу.
	•	Если запрос отклонен (недостаточно средств, неправильные данные), транзакция завершится с ошибкой.
	5.	Пополнение баланса:
После успешного подтверждения со стороны банка система увеличивает баланс пользователя в базе данных.
	6.	Завершение транзакции:
Статус транзакции обновляется на “успешно”. Пользователь получает уведомление об успешном пополнении (например, SMS или уведомление в приложении).

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Приведите ответ в свободной форме.*

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 
Ответ 3.1:
Преимущества SQL-систем по отношению к NoSQL

	1.	Гарантия целостности данных (ACID):
SQL-системы обеспечивают строгую гарантию целостности данных благодаря поддержке транзакций, которые соответствуют свойствам ACID (атомарность, согласованность, изолированность, долговечность). Это особенно важно для приложений, где требуется высокая надежность, например, банковские системы.
	2.	Строго определенная структура данных:
SQL использует реляционную модель, где данные хранятся в таблицах с четко определенными схемами. Это упрощает управление данными и гарантирует их согласованность.
	3.	Универсальный язык запросов (SQL):
SQL предоставляет мощный и стандартизированный язык для управления данными и выполнения сложных аналитических запросов. Он широко поддерживается большинством реляционных СУБД.
	4.	Интеграция и совместимость:
SQL-системы легко интегрируются с различными инструментами бизнес-аналитики (BI), отчетности и другими приложениями. Это делает их популярным выбором для корпоративных нужд.
	5.	Управление связями между данными:
SQL-системы оптимальны для работы с данными, связанными через четко определенные отношения. Они предоставляют механизмы первичных и внешних ключей, что упрощает работу с данными, связанными между таблицами.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

Ответ 4:
Для работы с огромным количеством данных на 1000 машин необходимо учитывать следующие ключевые критерии:

Критерии выбора:

	1.	Тип данных:
	•	Структурированные данные (счета, транзакции): реляционные SQL-СУБД.
	•	Неструктурированные или полуструктурированные данные (логи, метрики, JSON-файлы): NoSQL-СУБД.
	•	Смешанные типы данных: гибридные решения, такие как NewSQL или базы данных с поддержкой JSONB (например, PostgreSQL).
	2.	Объем и скорость обработки:
	•	Для интенсивных вычислений и анализа огромных массивов данных потребуется горизонтально масштабируемая СУБД.
	•	Поддержка распределённых вычислений важна для равномерной нагрузки на 1000 машин.
	3.	Требования к транзакциям:
	•	Для систем с критичной точностью данных (например, финансовые расчёты) лучше SQL или NewSQL с ACID-транзакциями.
	•	Для аналитики и потоковой обработки: NoSQL с высокой скоростью записи и чтения.
	4.	Инструменты анализа и интеграция:
	•	Возможность интеграции с платформами аналитики (Spark, Hadoop) или BI-инструментами.
	5.	Масштабируемость:
	•	База данных должна поддерживать горизонтальное масштабирование (кластеризация) для эффективного распределения данных между машинами.

Рекомендуемый тип СУБД:

	1.	Для аналитических задач и больших объемов данных:
Apache HBase (на основе Hadoop) или Google Bigtable.
	•	Оптимальны для работы с огромным количеством строк и колонок.
	•	Поддерживают высокую скорость чтения и записи.
	2.	Для аналитики и потоковой обработки:
Cassandra или Elasticsearch.
	•	Cassandra обеспечивает высокую доступность и горизонтальное масштабирование.
	•	Elasticsearch подходит для быстрых поисков и аналитики на больших данных.
	3.	Гибридное решение:
	•	PostgreSQL с расширением Citus: распределённая реляционная СУБД с возможностью обработки больших данных.
	•	CockroachDB: NewSQL для горизонтального масштабирования с ACID-транзакциями.

Рекомендуемая модель распределённых вычислений:

	1.	Apache Hadoop (MapReduce):
	•	Прекрасно справляется с пакетной обработкой огромных данных.
	•	Подходит для сценариев, где данные сохраняются в HDFS, а затем анализируются с использованием MapReduce.
	2.	Apache Spark:
	•	Универсальная платформа для распределённых вычислений.
	•	Подходит для потоковой и пакетной обработки.
	•	Работает быстрее, чем Hadoop, благодаря обработке данных в памяти (in-memory).
	3.	Presto:
	•	Легковесная распределённая вычислительная платформа для выполнения SQL-запросов на больших данных.
	•	Подходит для интерактивных запросов.